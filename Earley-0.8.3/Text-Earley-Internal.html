<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Text.Earley.Internal</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Text-Earley-Internal.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Text-Earley-Internal.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Earley-0.8.3: Parsing all context-free grammars using Earley's algorithm.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Text.Earley.Internal</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Concrete rules and productions</a></li><li><a href="#g:2">States and continuations</a></li><li><a href="#g:3">Grammars</a></li><li><a href="#g:4">Parsing</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module exposes the internals of the package: its API may change independently of the PVP-compliant version number.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Rule">Rule</a> s r e t a = <a href="#v:Rule">Rule</a> {<ul class="subs"><li><a href="#v:ruleProd">ruleProd</a> :: <a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s r e t a</li><li><a href="#v:ruleNullable">ruleNullable</a> :: !(<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s (<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> [a]))</li><li><a href="#v:ruleConts">ruleConts</a> :: !(<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s (<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s [<a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a r]))</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:ProdR">ProdR</a> s r e t a = <a href="Text-Earley-Grammar.html#t:Prod">Prod</a> (<a href="Text-Earley-Internal.html#t:Rule">Rule</a> s r) e t a</li><li class="src short"><a href="#v:nullable">nullable</a> :: <a href="Text-Earley-Internal.html#t:Rule">Rule</a> s r e t a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]</li><li class="src short"><a href="#v:nullableProd">nullableProd</a> :: <a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s r e t a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]</li><li class="src short"><a href="#v:resetConts">resetConts</a> :: <a href="Text-Earley-Internal.html#t:Rule">Rule</a> s r e t a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:Args">Args</a> s f a = f -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]</li><li class="src short"><a href="#v:noArgs">noArgs</a> :: <a href="Text-Earley-Internal.html#t:Args">Args</a> s a a</li><li class="src short"><a href="#v:funArg">funArg</a> :: (f -&gt; a) -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a</li><li class="src short"><a href="#v:pureArg">pureArg</a> :: x -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s (x -&gt; f) a</li><li class="src short"><a href="#v:impureArgs">impureArgs</a> :: <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [x] -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s (x -&gt; f) a</li><li class="src short"><a href="#v:mapArgs">mapArgs</a> :: (a -&gt; b) -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f b</li><li class="src short"><a href="#v:composeArgs">composeArgs</a> :: <a href="Text-Earley-Internal.html#t:Args">Args</a> s a b -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s b c -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s a c</li><li class="src short"><span class="keyword">type</span> <a href="#t:Pos">Pos</a> = <a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:State">State</a> s r e t a <span class="keyword">where</span><ul class="subs"><li><a href="#v:State">State</a> ::  !<a href="Text-Earley-Internal.html#t:Pos">Pos</a> -&gt; !(<a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s r e t f) -&gt; !(<a href="Text-Earley-Internal.html#t:Args">Args</a> s f b) -&gt; !(<a href="Text-Earley-Internal.html#t:Conts">Conts</a> s r e t b a) -&gt; <a href="Text-Earley-Internal.html#t:State">State</a> s r e t a</li><li><a href="#v:Final">Final</a> ::  f -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a -&gt; <a href="Text-Earley-Internal.html#t:State">State</a> s r e t a</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Cont">Cont</a> s r e t a b <span class="keyword">where</span><ul class="subs"><li><a href="#v:Cont">Cont</a> ::  !<a href="Text-Earley-Internal.html#t:Pos">Pos</a> -&gt; !(<a href="Text-Earley-Internal.html#t:Args">Args</a> s a b) -&gt; !(<a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s r e t (b -&gt; c)) -&gt; !(<a href="Text-Earley-Internal.html#t:Args">Args</a> s c d) -&gt; !(<a href="Text-Earley-Internal.html#t:Conts">Conts</a> s r e t d e') -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a e'</li><li><a href="#v:FinalCont">FinalCont</a> ::  <a href="Text-Earley-Internal.html#t:Args">Args</a> s a c -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Conts">Conts</a> s r e t a c = <a href="#v:Conts">Conts</a> {<ul class="subs"><li><a href="#v:conts">conts</a> :: !(<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s [<a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c])</li><li><a href="#v:contsArgs">contsArgs</a> :: !(<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s (<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s (<a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]))))</li></ul>}</li><li class="src short"><a href="#v:newConts">newConts</a> :: <a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s [<a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c] -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Conts">Conts</a> s r e t a c)</li><li class="src short"><a href="#v:contraMapCont">contraMapCont</a> :: <a href="Text-Earley-Internal.html#t:Args">Args</a> s b a -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t b c</li><li class="src short"><a href="#v:contToState">contToState</a> :: <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a] -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c -&gt; <a href="Text-Earley-Internal.html#t:State">State</a> s r e t c</li><li class="src short"><a href="#v:simplifyCont">simplifyCont</a> :: <a href="Text-Earley-Internal.html#t:Conts">Conts</a> s r e t b a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [<a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t b a]</li><li class="src short"><a href="#v:grammar">grammar</a> :: <a href="Text-Earley-Grammar.html#t:Grammar">Grammar</a> (<a href="Text-Earley-Internal.html#t:Rule">Rule</a> s r) e a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s a</li><li class="src short"><a href="#v:initialState">initialState</a> :: <a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s a e t a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:State">State</a> s a e t a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Report">Report</a> e i = <a href="#v:Report">Report</a> {<ul class="subs"><li><a href="#v:position">position</a> :: <a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:expected">expected</a> :: [e]</li><li><a href="#v:unconsumed">unconsumed</a> :: i</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Result">Result</a> s e i a<ul class="subs"><li>= <a href="#v:Ended">Ended</a> (<a href="Text-Earley-Internal.html#t:Report">Report</a> e i)</li><li>| <a href="#v:Parsed">Parsed</a> (<a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]) <a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a> i (<a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a))</li></ul></li><li class="src short"><a href="#v:safeHead">safeHead</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; i -&gt; <a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> t</li><li class="src short"><a href="#v:safeTail">safeTail</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; i -&gt; i</li><li class="src short"><a href="#v:parse">parse</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; [<a href="Text-Earley-Internal.html#t:State">State</a> s a e t a] -&gt; [<a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]] -&gt; [<a href="Text-Earley-Internal.html#t:State">State</a> s a e t a] -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s () -&gt; [e] -&gt; <a href="Text-Earley-Internal.html#t:Pos">Pos</a> -&gt; i -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)</li><li class="src short"><a href="#v:parser">parser</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; (<span class="keyword">forall</span> r. <a href="Text-Earley-Grammar.html#t:Grammar">Grammar</a> r e (<a href="Text-Earley-Grammar.html#t:Prod">Prod</a> r e t a)) -&gt; i -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)</li><li class="src short"><a href="#v:allParses">allParses</a> :: (<span class="keyword">forall</span> s. <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)) -&gt; ([(a, <a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a>)], <a href="Text-Earley-Internal.html#t:Report">Report</a> e i)</li><li class="src short"><a href="#v:fullParses">fullParses</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; (<span class="keyword">forall</span> s. <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)) -&gt; ([a], <a href="Text-Earley-Internal.html#t:Report">Report</a> e i)</li><li class="src short"><a href="#v:report">report</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; (<span class="keyword">forall</span> s. <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)) -&gt; <a href="Text-Earley-Internal.html#t:Report">Report</a> e i</li></ul></div><div id="interface"><h1 id="g:1">Concrete rules and productions</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Rule" class="def">Rule</a> s r e t a <a href="src/Text-Earley-Internal.html#Rule" class="link">Source</a></p><div class="doc"><p>The concrete rule type that the parser uses</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Rule" class="def">Rule</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:ruleProd" class="def">ruleProd</a> :: <a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s r e t a</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:ruleNullable" class="def">ruleNullable</a> :: !(<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s (<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> [a]))</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:ruleConts" class="def">ruleConts</a> :: !(<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s (<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s [<a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a r]))</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ProdR" class="def">ProdR</a> s r e t a = <a href="Text-Earley-Grammar.html#t:Prod">Prod</a> (<a href="Text-Earley-Internal.html#t:Rule">Rule</a> s r) e t a <a href="src/Text-Earley-Internal.html#ProdR" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:nullable" class="def">nullable</a> :: <a href="Text-Earley-Internal.html#t:Rule">Rule</a> s r e t a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a] <a href="src/Text-Earley-Internal.html#nullable" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:nullableProd" class="def">nullableProd</a> :: <a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s r e t a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a] <a href="src/Text-Earley-Internal.html#nullableProd" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:resetConts" class="def">resetConts</a> :: <a href="Text-Earley-Internal.html#t:Rule">Rule</a> s r e t a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s () <a href="src/Text-Earley-Internal.html#resetConts" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Args" class="def">Args</a> s f a = f -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a] <a href="src/Text-Earley-Internal.html#Args" class="link">Source</a></p><div class="doc"><p>If we have something of type <code>f</code>, <code><code><a href="Text-Earley-Internal.html#t:Args">Args</a></code> s f a</code> is what we need to do to
 <code>f</code> to produce <code>a</code>s.</p></div></div><div class="top"><p class="src"><a name="v:noArgs" class="def">noArgs</a> :: <a href="Text-Earley-Internal.html#t:Args">Args</a> s a a <a href="src/Text-Earley-Internal.html#noArgs" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:funArg" class="def">funArg</a> :: (f -&gt; a) -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a <a href="src/Text-Earley-Internal.html#funArg" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:pureArg" class="def">pureArg</a> :: x -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s (x -&gt; f) a <a href="src/Text-Earley-Internal.html#pureArg" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:impureArgs" class="def">impureArgs</a> :: <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [x] -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s (x -&gt; f) a <a href="src/Text-Earley-Internal.html#impureArgs" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:mapArgs" class="def">mapArgs</a> :: (a -&gt; b) -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f b <a href="src/Text-Earley-Internal.html#mapArgs" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:composeArgs" class="def">composeArgs</a> :: <a href="Text-Earley-Internal.html#t:Args">Args</a> s a b -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s b c -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s a c <a href="src/Text-Earley-Internal.html#composeArgs" class="link">Source</a></p></div><h1 id="g:2">States and continuations</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Pos" class="def">Pos</a> = <a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a> <a href="src/Text-Earley-Internal.html#Pos" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:State" class="def">State</a> s r e t a <span class="keyword">where</span> <a href="src/Text-Earley-Internal.html#State" class="link">Source</a></p><div class="doc"><p>An Earley state with result type <code>a</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:State" class="def">State</a> ::  !<a href="Text-Earley-Internal.html#t:Pos">Pos</a> -&gt; !(<a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s r e t f) -&gt; !(<a href="Text-Earley-Internal.html#t:Args">Args</a> s f b) -&gt; !(<a href="Text-Earley-Internal.html#t:Conts">Conts</a> s r e t b a) -&gt; <a href="Text-Earley-Internal.html#t:State">State</a> s r e t a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Final" class="def">Final</a> ::  f -&gt; <a href="Text-Earley-Internal.html#t:Args">Args</a> s f a -&gt; <a href="Text-Earley-Internal.html#t:State">State</a> s r e t a</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Cont" class="def">Cont</a> s r e t a b <span class="keyword">where</span> <a href="src/Text-Earley-Internal.html#Cont" class="link">Source</a></p><div class="doc"><p>A continuation accepting an <code>a</code> and producing a <code>b</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Cont" class="def">Cont</a> ::  !<a href="Text-Earley-Internal.html#t:Pos">Pos</a> -&gt; !(<a href="Text-Earley-Internal.html#t:Args">Args</a> s a b) -&gt; !(<a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s r e t (b -&gt; c)) -&gt; !(<a href="Text-Earley-Internal.html#t:Args">Args</a> s c d) -&gt; !(<a href="Text-Earley-Internal.html#t:Conts">Conts</a> s r e t d e') -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a e'</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:FinalCont" class="def">FinalCont</a> ::  <a href="Text-Earley-Internal.html#t:Args">Args</a> s a c -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Conts" class="def">Conts</a> s r e t a c <a href="src/Text-Earley-Internal.html#Conts" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Conts" class="def">Conts</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:conts" class="def">conts</a> :: !(<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s [<a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c])</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:contsArgs" class="def">contsArgs</a> :: !(<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s (<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s (<a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]))))</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:newConts" class="def">newConts</a> :: <a href="../base-4.8.1.0/Data-STRef.html#t:STRef">STRef</a> s [<a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c] -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Conts">Conts</a> s r e t a c) <a href="src/Text-Earley-Internal.html#newConts" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:contraMapCont" class="def">contraMapCont</a> :: <a href="Text-Earley-Internal.html#t:Args">Args</a> s b a -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t b c <a href="src/Text-Earley-Internal.html#contraMapCont" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:contToState" class="def">contToState</a> :: <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a] -&gt; <a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t a c -&gt; <a href="Text-Earley-Internal.html#t:State">State</a> s r e t c <a href="src/Text-Earley-Internal.html#contToState" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:simplifyCont" class="def">simplifyCont</a> :: <a href="Text-Earley-Internal.html#t:Conts">Conts</a> s r e t b a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [<a href="Text-Earley-Internal.html#t:Cont">Cont</a> s r e t b a] <a href="src/Text-Earley-Internal.html#simplifyCont" class="link">Source</a></p><div class="doc"><p>Strings of non-ambiguous continuations can be optimised by removing
   indirections.</p></div></div><h1 id="g:3">Grammars</h1><div class="top"><p class="src"><a name="v:grammar" class="def">grammar</a> :: <a href="Text-Earley-Grammar.html#t:Grammar">Grammar</a> (<a href="Text-Earley-Internal.html#t:Rule">Rule</a> s r) e a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s a <a href="src/Text-Earley-Internal.html#grammar" class="link">Source</a></p><div class="doc"><p>Interpret an abstract <code><a href="Text-Earley-Grammar.html#t:Grammar">Grammar</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:initialState" class="def">initialState</a> :: <a href="Text-Earley-Internal.html#t:ProdR">ProdR</a> s a e t a -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:State">State</a> s a e t a) <a href="src/Text-Earley-Internal.html#initialState" class="link">Source</a></p><div class="doc"><p>Given a grammar, construct an initial state.</p></div></div><h1 id="g:4">Parsing</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Report" class="def">Report</a> e i <a href="src/Text-Earley-Internal.html#Report" class="link">Source</a></p><div class="doc"><p>A parsing report, which contains fields that are useful for presenting
 errors to the user if a parse is deemed a failure.  Note however that we get
 a report even when we successfully parse something.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Report" class="def">Report</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:position" class="def">position</a> :: <a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>The final position in the input (0-based) that the
 parser reached.</p></dd><dt class="src"><a name="v:expected" class="def">expected</a> :: [e]</dt><dd class="doc"><p>The named productions processed at the final
 position.</p></dd><dt class="src"><a name="v:unconsumed" class="def">unconsumed</a> :: i</dt><dd class="doc"><p>The part of the input string that was not consumed,
 which may be empty.</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Report" class="caption collapser" onclick="toggleSection('i:Report')">Instances</p><div id="section.i:Report" class="show"><table><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.1.0/Data-Eq.html#t:Eq">Eq</a> e, <a href="../base-4.8.1.0/Data-Eq.html#t:Eq">Eq</a> i) =&gt; <a href="../base-4.8.1.0/Data-Eq.html#t:Eq">Eq</a> (<a href="Text-Earley-Internal.html#t:Report">Report</a> e i)</span> <a href="src/Text-Earley-Internal.html#line-165" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.1.0/Data-Ord.html#t:Ord">Ord</a> e, <a href="../base-4.8.1.0/Data-Ord.html#t:Ord">Ord</a> i) =&gt; <a href="../base-4.8.1.0/Data-Ord.html#t:Ord">Ord</a> (<a href="Text-Earley-Internal.html#t:Report">Report</a> e i)</span> <a href="src/Text-Earley-Internal.html#line-165" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.1.0/Text-Read.html#t:Read">Read</a> e, <a href="../base-4.8.1.0/Text-Read.html#t:Read">Read</a> i) =&gt; <a href="../base-4.8.1.0/Text-Read.html#t:Read">Read</a> (<a href="Text-Earley-Internal.html#t:Report">Report</a> e i)</span> <a href="src/Text-Earley-Internal.html#line-165" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.1.0/Text-Show.html#t:Show">Show</a> e, <a href="../base-4.8.1.0/Text-Show.html#t:Show">Show</a> i) =&gt; <a href="../base-4.8.1.0/Text-Show.html#t:Show">Show</a> (<a href="Text-Earley-Internal.html#t:Report">Report</a> e i)</span> <a href="src/Text-Earley-Internal.html#line-165" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Result" class="def">Result</a> s e i a <a href="src/Text-Earley-Internal.html#Result" class="link">Source</a></p><div class="doc"><p>The result of a parse.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Ended" class="def">Ended</a> (<a href="Text-Earley-Internal.html#t:Report">Report</a> e i)</td><td class="doc"><p>The parser ended.</p></td></tr><tr><td class="src"><a name="v:Parsed" class="def">Parsed</a> (<a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]) <a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a> i (<a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a))</td><td class="doc"><p>The parser parsed a number of <code>a</code>s.  These are given as a computation,
 <code><code><a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a></code> s [a]</code> that constructs the <code>a</code>s when run.  We can thus save some
 work by ignoring this computation if we do not care about the results.
 The <code><a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a></code> is the position in the input where these results were
 obtained, the <code>i</code> the rest of the input, and the last component is the
 continuation.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Result" class="caption collapser" onclick="toggleSection('i:Result')">Instances</p><div id="section.i:Result" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.1.0/Data-Functor.html#t:Functor">Functor</a> (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i)</span> <a href="src/Text-Earley-Internal.html#line-178" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:safeHead" class="def">safeHead</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; i -&gt; <a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> t <a href="src/Text-Earley-Internal.html#safeHead" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:safeTail" class="def">safeTail</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; i -&gt; i <a href="src/Text-Earley-Internal.html#safeTail" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:parse" class="def">parse</a> <a href="src/Text-Earley-Internal.html#parse" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; [<a href="Text-Earley-Internal.html#t:State">State</a> s a e t a]</td><td class="doc"><p>States to process at this position</p></td></tr><tr><td class="src">-&gt; [<a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s [a]]</td><td class="doc"><p>Results ready to be reported (when this position has been processed)</p></td></tr><tr><td class="src">-&gt; [<a href="Text-Earley-Internal.html#t:State">State</a> s a e t a]</td><td class="doc"><p>States to process at the next position</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s ()</td><td class="doc"><p>Computation that resets the continuation refs of productions</p></td></tr><tr><td class="src">-&gt; [e]</td><td class="doc"><p>Named productions encountered at this position</p></td></tr><tr><td class="src">-&gt; <a href="Text-Earley-Internal.html#t:Pos">Pos</a></td><td class="doc"><p>The current position in the input string</p></td></tr><tr><td class="src">-&gt; i</td><td class="doc"><p>The input string</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The internal parsing routine</p></div></div><div class="top"><p class="src"><a name="v:parser" class="def">parser</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; (<span class="keyword">forall</span> r. <a href="Text-Earley-Grammar.html#t:Grammar">Grammar</a> r e (<a href="Text-Earley-Grammar.html#t:Prod">Prod</a> r e t a)) -&gt; i -&gt; <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a) <a href="src/Text-Earley-Internal.html#parser" class="link">Source</a></p><div class="doc"><p>Create a parser from the given grammar.</p></div></div><div class="top"><p class="src"><a name="v:allParses" class="def">allParses</a> :: (<span class="keyword">forall</span> s. <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)) -&gt; ([(a, <a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a>)], <a href="Text-Earley-Internal.html#t:Report">Report</a> e i) <a href="src/Text-Earley-Internal.html#allParses" class="link">Source</a></p><div class="doc"><p>Return all parses from the result of a given parser. The result may
 contain partial parses. The <code><a href="../base-4.8.1.0/Data-Int.html#t:Int">Int</a></code>s are the position at which a result was
 produced.</p></div></div><div class="top"><p class="src"><a name="v:fullParses" class="def">fullParses</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; (<span class="keyword">forall</span> s. <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)) -&gt; ([a], <a href="Text-Earley-Internal.html#t:Report">Report</a> e i) <a href="src/Text-Earley-Internal.html#fullParses" class="link">Source</a></p><div class="doc"><p>Return all parses that reached the end of the input from the result of a
   given parser.</p></div></div><div class="top"><p class="src"><a name="v:report" class="def">report</a> :: <a href="../ListLike-4.2.0/Data-ListLike-Base.html#t:ListLike">ListLike</a> i t =&gt; (<span class="keyword">forall</span> s. <a href="../base-4.8.1.0/Control-Monad-ST.html#t:ST">ST</a> s (<a href="Text-Earley-Internal.html#t:Result">Result</a> s e i a)) -&gt; <a href="Text-Earley-Internal.html#t:Report">Report</a> e i <a href="src/Text-Earley-Internal.html#report" class="link">Source</a></p><div class="doc"><p>See e.g. how far the parser is able to parse the input string before it
 fails.  This can be much faster than getting the parse results for highly
 ambiguous grammars.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>